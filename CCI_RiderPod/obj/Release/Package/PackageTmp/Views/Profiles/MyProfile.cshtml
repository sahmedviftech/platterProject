@model CCI_Homii.Models.PartialClasses.PC_UserProfile
@{
    ViewBag.Title = "Profile - Homii";
    Layout = "~/Views/Shared/_Layout.cshtml";
    //var UserDeatail = (CCI_Homii.Models.User)Session["UserSession"];
    var UserDetail = Model.User;
    var UserGallery = Model.UserGallery;

}

<div class="testimonials">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 m-auto">
                <div class="card bg-gray mt-5">
                    <div class="card-header">
                        <div class="row">
                            <div class="col-8">
                                <h2 class="white-nowrap">Edit your profile</h2>
                            </div>
                            <div class="col-4 text-right">
                                <!-- <h6 class="mt-3">Contractor</h6> -->
                            </div>
                        </div>
                    </div>

                    <div class="card-body">
                        @if (UserDetail.AccountTypeID == 2)
                        {
                            <div class="contractor-dp">
                                <img id="blah" src="@UserDetail.ImagePath" alt="Profile image" />
                                @*<input type='file' onchange="readURL(this);" id="profile-img"/>*@
                                <input type='file' id="profile-img" />
                            </div>
                        }


                        <div class="row editprofile m_-10">
                            <input type="text" value="@UserDetail.Id" id="Id" hidden>
                            <input type="text" value="@UserDetail.AccountTypeID" id="AccountTypeID" hidden>
                            <div class="col-md-6 p_10">
                                <div class="form-group">
                                    <label>First Name*</label>
                                    <input type="text" value="@UserDetail.FirstName" data-toggle="tooltip" data-placement="bottom"  title="Enter Your First Name" class="form-control" id="FirstName" data-parsley-pattern="^[a-zA-Z]+$" data-parsley-pattern-message="First Name should be without space" required data-parsley-trigger="keyup">
                                </div>
                            </div>
                            <div class="col-md-6 p_10">
                                <div class="form-group">
                                    <label>Last Name*</label>
                                    <input type="text" class="form-control" id="LastName" data-toggle="tooltip" data-placement="bottom"  title="Enter Your Last Name" value="@UserDetail.LastName" data-parsley-pattern="^[a-zA-Z]+$" data-parsley-pattern-message="Last Name should be without space" required data-parsley-trigger="keyup">
                                </div>
                            </div>


                            <div class="col-md-6 p_10">
                                <div class="form-group">
                                    <label>Phone Number*</label>
                                    @*<input type="text" class="form-control login-custm-form" id="PhoneNumber" data-parsley-pattern="^\d{3}-\d{3}-\d{4}$" data-parsley-trigger="keyup" required="Requireed Format: 111-111-1111" value="@UserDetail.PhoneNumber" placeholder="Phone Number">*@
                                    <input type="text" class="form-control login-custm-form" data-toggle="tooltip" data-placement="bottom"  title="Enter Your Phone Number" id="PhoneNumber" data-parsley-pattern="^\d{3}-\d{3}-\d{4}$" parsley-type="phone" data-parsley-trigger="keydown" required="Requireed Format: 111-111-1111" value="@UserDetail.PhoneNumber" placeholder="Phone Number" maxlength="12" onkeypress="return event.charCode >= 48 && event.charCode <= 57">
                                </div>
                            </div>
                            <div class="col-md-6 p_10">
                                <div class="form-group">
                                    <label>Postal Code</label>
                                    <input type="text" class="form-control" id="PostalCode" data-toggle="tooltip" data-placement="bottom"  title="Enter Your Postal Code" value="@UserDetail.PostalCode" data-parsley-pattern="^[A-Z0-9]{6}(?:List)?$" data-parsley-minlength="6" data-parsley-maxlength="6" required="" data-parsley-required-message="Invalid Postal code format" data-parsley-trigger="keyup">
                                </div>
                            </div>
                            <div class="col-md-12 p_10">
                                <div class="form-group">
                                    <label>Email Address*</label>
                                    <input type="email" class="form-control" data-toggle="tooltip" data-placement="bottom"  title="Enter Your Email Address" value="@UserDetail.Email" id="Email" required data-parsley-type="email" data-parsley-trigger="keyup" data-parsley-required-message="Invalid Email">
                                </div>
                            </div>
                            <div class="col-md-12 p_10">
                                <div class="form-group">
                                    <label>Password*</label>
                                    <div class="input-group">
                                        @*<input type="button" value="Change Password" class="form-control InputValidation" id="Password" data-toggle="modal" data-target="#myModal">*@
                                        <input type="password" class="form-control" data-toggle="tooltip" data-placement="bottom"  title="Change Password" value="" id="Password" disabled>
                                        <a class="input-group-append" onclick="showMOdal()">
                                            <span class="input-group-text">Change password</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                            @if (UserDetail.IsActive == true)
                            {
                                <input type="checkbox" id="IsActive" checked hidden>
                            }
                            else
                            {
                                <input type="checkbox" id="IsActive" hidden>
                            }
                            @if (UserDetail.AccountTypeID == 2)
                            {

                                <div class="col-md-6 p_10">
                                    <div class="form-group">
                                        <label>Company Name*</label>
                                        <input type="text" class="form-control" value="@UserDetail.CompanyName" id="CompanyName">
                                    </div>
                                </div>
                                <div class="col-md-6 p_10">
                                    <div class="form-group">
                                        <label>Business Address</label>
                                        <input type="text" class="form-control" value="@UserDetail.BusinessAddress" id="BusinessAddress">
                                    </div>
                                </div>
                                <div class="col-md-6 p_10">
                                    <div class="form-group">
                                        <label>Business Phone Number</label>
                                        <input type="text" class="form-control" value="@UserDetail.BusinessPhoneNumber" id="BusinessPhoneNumber">
                                    </div>
                                </div>
                                <div class="col-md-6 p_10">
                                    <div class="form-group">
                                        <label>Number of Employee</label>
                                        <input type="text" class="form-control" value="@UserDetail.NumberOfEmployee" id="NumberOfEmployee">
                                    </div>
                                </div>
                                <div class="col-md-6 p_10">
                                    <div class="form-group">
                                        <label>In Business Since</label>
                                        <input type="text" class="form-control" value="@UserDetail.InBusinessSince" id="InBusinessSince">
                                    </div>
                                </div>
                                <div class="col-md-6 p_10">
                                    <div class="form-group">
                                        <label>Legal Structure</label>
                                        <input type="text" class="form-control" value="@UserDetail.LegalStructure" id="LegalStructure">
                                    </div>
                                </div>
                                <hr>
                            }
                        </div>



                        @if (UserDetail.AccountTypeID == 2)
                        {
                            <div class="upload_gallery mb-4">
                                <input type="file" multiple id="gallery-photo-add">
                                <span class="txt">5MB Max - .jpg, .png, .gif</span>
                                <div class="gallery" id="GalleryImgSection">
                                    @for (int i = 0; i < UserGallery.Count; i++)
                                    {
                                        <img src="@UserGallery[i].GalImagePath" id="profile-img-tag" />
                                        @*<a onclick="bindDeleteGalImage(@UserGallery[i].Id)">Delete</a>*@
                                        <h6 class="mt-3">Uploaded</h6>
                                        <span class="img_nam mr-3">MY_FIRST_PROFICIENCY_TEST.jpg</span><i class="fa fa-trash" onclick="bindDeleteGalImage(@UserGallery[i].Id)"></i>
                                        <br />
                                    }
                                </div>

                            </div><!-- End upload_gallery -->

                            @*<input type="file" name="filepath" id="ProfileGalImg" value="Upload Image" multiple>*@
                        }


                        <div class="card-footer text-right">
                            <button class="btn btn-primary btn-custom" id="btnSave">Save Changes</button>
                        </div>
                    </div>
                </div><!-- End card -->
            </div><!-- End col -->
        </div><!-- End row -->
    </div><!-- End container -->
</div>







<!-- Modal -->
<div class="modal fade" id="changepswrd" tabindex="-1" role="dialog" aria-labelledby="write-a-reviewLabel" aria-hidden="true">
    <div class="modal-dialog modal-md" role="document">
        <div class="modal-content modal-content-review">
            <div class="modal-header">
                <h5 class="modal-title" id="write-a-reviewLabel">Change Your Password</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body modal-body-review">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="row m_-10 editprofile">
                            <div class="col-md-12 p_10">
                                <div class="form-group">
                                    <label>Current Pasword*</label>
                                    <input type="password" class="form-control" id="Currentpassword" onchange="CheckCurrentPass()" onkeyup="hideData('pasmsg')">
                                    <span id="pasmsg" style="color:red;">Invalid Password</span>
                                </div>
                            </div>
                            <div class="col-md-12 p_10">
                                <div class="form-group">
                                    <label>New Pasword*</label>
                                    <input type="password" onkeyup="checkPassword('password')" class="form-control" id="password">
                                </div>
                            </div>
                            <div class="col-md-12 p_10">
                                <div class="form-group">
                                    <label>Confirm Pasword*</label>
                                    <input type="password" onkeyup="checkPassword('confirm_password')" class="form-control" id="confirm_password">
                                </div>

                            </div>
                            @*<div class="registrationFormAlert" id="message">
                                </div>*@
                            @*<div class="col-md-12 p_10">
                                    <div class="form-group">
                                        <label>Enter Current Pasword*</label>
                                        <input type="password" class="form-control" value="asdfasdf">
                                    </div>
                                </div>*@
                        </div>


                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary btn-custom" id="passUpdate" disabled>Save Changes</button>
            </div>
        </div>
    </div>
</div>




@section FooterScripts{
    <script>
        var MaxUploadLimit = @UserDetail.Value;
        var imgcount = $("#GalleryImgSection img").length;

    </script>
    <script src="~/scripts/PageJS/UserProfile.js"></script>

    <script>
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#blah')
                        .attr('src', e.target.result);
                };

                reader.readAsDataURL(input.files[0]);
            }
        }

        $(function () {
            // Multiple images preview in browser
            var imagesPreview = function (input, placeToInsertImagePreview) {

                if (input.files) {
                    var filesAmount = input.files.length;

                    for (i = 0; i < filesAmount; i++) {
                        var reader = new FileReader();

                        reader.onload = function (event) {
                            $($.parseHTML('<img>')).attr('src', event.target.result).appendTo(placeToInsertImagePreview);
                        }

                        reader.readAsDataURL(input.files[i]);
                    }
                }

            };

            $('#gallery-photo-add').on('change', function () {
                imagesPreview(this, 'div.gallery');
            });
        });
    </script>



}














































